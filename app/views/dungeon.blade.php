@extends('layouts.master')
@section('content')
<body class="dungeonbody">
	<div class="dungeon container-fluid">
		<div class="row-fluid">
			{{-- <div class="col-lg-12"> --}}
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
				<div class="dungeonspike"></div>
			{{-- </div> --}}
		</div>
		<div class="row-fluid">
			<div class="text-center information">
				{{-- <span class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="{{{$health}}}" aria-valuemin="0" aria-valuemax="100" style="width: 60%">Health: {{{$health}}}%</span>
				<br> --}}
				<span class="healthbar">Health: {{{$health}}}%</span>
				<div class="progress">
					<div class="health progress-bar progress-bar-danger" role="progressbar" aria-valuenow="{{{$health}}}" aria-valuemin="0" aria-valuemax="100" style="width: {{{$health}}}%"></div>
				</div>
				<span class="healthbar">Now Using: </span><img class="currently" src="/img/Fireball-right.png">
				<a href="{{{action('HomeController@restart')}}}"><button class="restartbutton">Restart Game</button></a>
			</div>
		</div>
		<div class="row-fluid">
			<div class="dungeondoor"></div>
			<img class="wizard" src="/img/Wizard-going-right.png"> <img class="fireball" src="/img/Fireball-right.png">
		</div>
		<div class="row-fluid">
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			<div class="dungeonfloor"></div>
			
		</div>
	</div>
</body>
<form id="exitdungeonform" method="POST" action="{{{action('HomeController@exitdungeon', array(100))}}}">
	<input type="hidden">
</form>
@stop
@section('bottom-script')
<script type="text/javascript">
"Use Strict";
var scroll = 100;
var initialscroll = 100;
var savetherightscroll = 100;
// var overlaps = (function () {
//     function getPositions( elem ) {
//         var pos, width, height;
//         pos = $( elem ).position();
//         width = $( elem ).width();
//         height = $( elem ).height();
//         return [ [ pos.left, pos.left + width ], [ pos.top, pos.top + height ] ];
//     }

//     function comparePositions( p1, p2 ) {
//         var r1, r2;
//         r1 = p1[0] < p2[0] ? p1 : p2;
//         r2 = p1[0] < p2[0] ? p2 : p1;
//         return r1[1] > r2[0] || r1[0] === r2[0];
//     }

//     return function ( wizard, dungeondoor ) {
//         var pos1 = getPositions( wizard ),
//             pos2 = getPositions( dungeondoor );
//         return comparePositions( pos1[0], pos2[0] ) && comparePositions( pos1[1], pos2[1] );
//     };
// })();

// $(function () {
//     var wizard = $( '.wizard' )[0],
//         door = $( '.dungeondoor' )[0],
//         html;
    
//     html = $( wizard ).children().not( door ).map( function ( i ) {
//         return console.log('<p>Red box + Box ' + ( i + 1 ) + ' = ' + overlaps( door, this ) + '</p>');
//     }).get().join( '' );

//     console.log( html );
// });

 $(document).keydown(function(event){
    var input = event.which;
    if(scroll >= 11100) {
    	$("#exitdungeonform").submit();
    }

// The "D" key. Moving to the right
    if(input == 68) {
    	savetherightscroll += 50;
    	$(".wizard").attr("src", "/img/Wizard-going-right.png");
    	$(".fireball").attr("src", "/img/Fireball-right.png");
    	if(savetherightscroll >= 100) {
	    	$(".wizard").animate({
	    		marginLeft: "+=100px"
	    	}, 0);
	    	$(".dungeonbody").scrollLeft(scroll);
    	}
    	$(".fireball").animate({
    		left: "0px",
    	}, 0);
    	scroll = scroll + 100;
 		initialscroll = scroll;
 		console.log("Scroll: " + scroll);
 		console.log("Initialscroll: " + initialscroll);
 		console.log("Right Scroll: " + savetherightscroll);

// The "A" key. Moving to the left
    } else if (input == 65) {
 		savetherightscroll = 0;
    	scroll = scroll - 100;
    	$(".fireball").animate({
    		left: "-100px",
    	}, 0);
    	$(".dungeonbody").scrollLeft(scroll);
    	$(".wizard").attr("src", "/img/Wizard-going-left.png");
    	$(".fireball").attr("src", "/img/Fireball-left.png");
    	if(scroll <= initialscroll - 200 && scroll >= 0) {
	    	$(".wizard").animate({
	    		marginLeft: "-=100px"
	    	}, 0);
    	}

// The "W" key. Jumping.
    } else if (input == 87) {
    	$(".wizard").animate({
    		marginTop: "-=300px",
    		marginBottom: "+=300px"
    	}, 500).animate({
    		marginTop: "+=300px",
    		marginBottom: "-=300px"
    	}, 500);

// The Spacebar. Shooting a fireball. 
    } else if (input == 32) {
    	if($(".fireball").attr("src") == "/img/Fireball-right.png" || $(".fireball").attr("src") == "/img/Lightning-right.png" || $(".fireball").attr("src") == "/img/Frost-right.png") {
	    	$(".fireball").animate({
	    		opacity: 1
	    	}, 0).animate({
	    		left: "+=1500px"
	    	}, 2000).animate({
	    		opacity: 0,
	    		left: "-=1500px"
	    	}, 0);
    	} else {
    		$(".fireball").css("marginLeft", "-1px");
    		$(".fireball").animate({
	    		opacity: 1
	    	}, 0).animate({
	    		left: "-=1500px"
	    	}, 2000).animate({
	    		opacity: 0,
	    		left: "+=1500px"
	    	}, 0);
    	}

// The "C" key. Switching attack type
    } else if (input == 67) {
    	if($(".fireball").attr("src") == "/img/Fireball-right.png" || $(".fireball").attr("src") == "/img/Fireball-left.png") {
    		$(".currently").attr("src", "/img/Lightning-right.png");
    		if($(".fireball").attr("src") == "/img/Fireball-right.png") {
    			$(".fireball").attr("src", "/img/Lightning-right.png");
    			console.log("switching to lightning");
    		} else {
    			$(".fireball").attr("src", "/img/Lightning-left.png");
    			console.log("switching to left lighting");
    		}
    	} else if($(".fireball").attr("src") == "/img/Lightning-right.png" || $(".fireball").attr("src") == "/img/Lightning-left.png") {
    		$(".currently").attr("src", "/img/Frost-right.png");
    		if($(".fireball").attr("src") == "/img/Lightning-right.png") {
    			$(".fireball").attr("src", "/img/Frost-right.png");
    		} else {
    			$(".fireball").attr("src", "/img/Frost-left.png");
    		}
    	} else if($(".fireball").attr("src") == "/img/Frost-right.png" || $(".fireball").attr("src") == "/img/Frost-left.png") {
    		$(".currently").attr("src", "/img/Fireball-right.png");
    		if($(".fireball").attr("src") == "/img/Frost-right.png") {
    			$(".fireball").attr("src", "/img/Fireball-right.png");
    		} else {
    			$(".fireball").attr("src", "/img/Fireball-left.png");
    		}
    	}
    }
  });
</script>
@stop